%===================================== CHAPTER 5 Requirements specification =================================

\chapter{Requirements specification}

This chapter describes the requirements for the application. The chapter is divided into two sections: one section describing the functional requirements and another that describes the non-functional requirements.

\section{Functional requirements}

The functional requirements were elicited and agreed upon with the customer in meetings and formalized in the requirement specification as seen in \textbf{Appendix \ref{app:functional_requirements}}. The first three requirements are non-functional requirements and therefore described in the next section. In early customer meetings the functionalities of the application were discussed informally. The group wrote a requirement specification which was then discussed at subsequent meetings. Each proposed requirement was refined and given a priority using a high-medium-low scale. This priority has guided the development process for the project. In addition, the group created its own prioritization where all the requirements were ranked, each with its own unique number ranging from one to the total number of requirements. The description of requirements in this chapter is more high-level than the one found in the requirement specification. 

\subsection{Summary of the functional requirements}
\label{subsec:summary_functional_requirements}

\begin{itemize}
	\item Sign up/Sign in view: The application should in some way be able to identify users, but keep them as anonymous as possible. As agreed with the customer, storing the email address is adequate, as it is only a prototype for a limited set of users and it does not store sensitive information. For research purposes, personal data like age group and gender should be collected.
	
	\item Preferences/Settings: The user should be able to specify some preferences regarding interest in cultural categories.
	
	\item Main view - Browse recommended stories: The application should provide the user with recommended stories based on user preferences. The user is provided with three choices on each story: to read it now, to reject the story, or to save it for later. In addition, the application should provide an explanation for why each story was recommended.
	
	\item Story view: The application should present a chosen story in a way that respects the work of the author and resembles the presentation given on \textit{Digitalt fortalt}'s website. Every story should also include a link to the corresponding story on Digitalt fortalt. The user should be given the opportunity to rate the story and to bookmark the story. 
	
	\item List view: The application should be able to keep lists of stories. Lists are created based on the bookmarks on stories, which are either system-generated (to-read, read) or the user's own bookmarks.
	
	\item Notifications: The application should provide the user with the opportunity to set a preferred time for receiving a notification about a new recommended story on their device. At the set time, the application should send the notification. In addition, the application should notify the user when a story is missing a rating.
	
	\item About site: The application should include an about site, which explains the context in which the application was created.
	
	\item Quick tour: An introduction to the application should be given to new users, and also be available through the menu.  
	
	\item Personalization: When recommending stories, the application should employ both content-based filtering and collaborative filtering algorithms.
	
	\item Research: The application should gather information about usage. The customer provided a list of what this entailed, some details can be found in \textbf{Section \ref{sec:database_design}}.
\end{itemize}


\subsection{Use cases}
\label{subsec:use_cases}

The use cases in this section give an overview of the interaction with the system. In the requirements document one can find references to the use cases for requirements that involve external interaction.\newline

A use case is a simple scenario that identifies actors involved in an interaction with a system and describe this interaction \cite[p.106-107]{Sommerville}. The use case diagrams here are presented with ellipses that represent the use case and the stick figures that represent the actors. Actors in these use cases are the user of the system, the device on which the application runs, and Digitalt fortalt. Include arrows means that the included use case is required to accomplish the use case the arrow originates from, while the extends arrow describe a use case that might be performed after the main use case. The use cases consist of a textual description as seen in \textbf{\Crefrange{Tab:U1}{Tab:U10}} and corresponding use case diagrams as seen in \textbf{\Crefrange{Fig:U1}{Fig:U10}}. The textual description follows a template which consists of these items:
\begin{itemize}
\item ID: A unique identification for the use case.
\item Name: A short text describing the goal of the use case.
\item Brief description: This is a more elaborate explanation of the use case than the above.
\item Actors: These are the users/systems outside the application interacting with it.
\item Priority: A metric describing the priority of this use case. The metric is derived from the functional requirements document and uses a high-medium-low scale.
\item Preconditions: Describe what state the system should be in before the use case can start. Typically, some of the other use cases are already performed to set up the use case.
\item Basic flow: This describes the normal flow from preconditions to postconditions in a numbered list.
\item Alternate flow: A description of scenarios that differ from the basic flow described above. This includes exceptions and errors. It is also presented as a list, but the numbering in this list refers to the items in the basic flow list. The items in this list do not relate to each other.
\item Postconditions: Describe what state the system should be in after the use case is performed.
\end{itemize}
\clearpage
\begin{figure}[hp]
	\includegraphics[width=\textwidth]{fig/U1}
	\centering
	\caption{Use case diagram of U1. Create profile}
	\label{Fig:U1}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U1. Create profile}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U1									\\\hline
		\textbf{Name} 				& Create recoverable profile.			\\\hline
		\textbf{Brief description}	& Enter e-mail to register. 				\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& Application installed	and no user is signed in				\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
									  \begin{enumerate}[noitemsep]
										\item User clicks on register new user
										\item User fills in e-mail into a registration form
										\item Input validated
										\item User finishes the registration and the system saves the user ID
									  \end{enumerate}						
									  \end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
									  \begin{enumerate}[noitemsep]
										\item User skips registration and starts using the system
										\item The system stores the new user by an ID internally
									  \end{enumerate}
									 \end{minipage}							\\\hline
		\textbf{Postconditions}		& User is created and saved by the system\\\hline
	\end{tabular}
	\label{Tab:U1}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=0.5\textwidth]{fig/U2}
	\centering
	\caption{Use case diagram of U2. Sign in}
	\label{Fig:U2}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U2. Sign in}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U2									\\\hline
		\textbf{Name} 				& Sign in.								\\\hline
		\textbf{Brief description}	& Enter e-mail address to sign in. 		\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& User has already registered, but is not signed in on this device			\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User clicks on sign in
				\item User fills in e-mail into form
				\item System checks e-mail address. User id returned
				\item Main view displayed
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User not found
				\item Error message displayed, go to 2.
			\end{enumerate}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& User is signed in to the system\\\hline
	\end{tabular}
	\label{Tab:U2}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=\textwidth]{fig/U3}
	\centering
	\caption{Use case diagram of U3. Set initial settings}
	\label{Fig:U3}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U3. Set initial settings}
	\begin{tabular}[b]{|l | p{13cm}|}\hline
		\textbf{ID} 				& U3									\\\hline
		\textbf{Name} 				& Set initial settings.					\\\hline
		\textbf{Brief description}	& Specify user information to be used for receiving stories. \\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& Application installed, user id received				\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User is initially asked to fill a form about preferences by the system
					\begin{enumerate}
						\item Personal info: age group and sex
						\item Cultural category preferences
					\end{enumerate}
				\item The system saves information about the user’s preferences
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User clicks on settings in order to change preferences
			\end{enumerate}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& The system has information about the user in order to provide personalized story recommendations.\\\hline
	\end{tabular}
	\label{Tab:U3}
\end{table}

\begin{figure}[hp]
	\includegraphics[height=7cm]{fig/U4}
	\centering
	\caption{Use case diagram of U4. Browse recommended stories}
	\label{Fig:U4}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U4. Browse recommended stories}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U4									\\\hline
		\textbf{Name} 				& Browse recommended stories.			\\\hline
		\textbf{Brief description}	& User is shown a list of recommended stories to choose from. 		\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& Preferences already set				\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User is shown recommended stories including an explanation of why the story was recommended
				\item User does one of the three following actions on a story:
					\begin{enumerate}
						\item Choose to read the story now
						\item Reject the story
						\item Bookmark story  
					\end{enumerate}
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& The system has stored information about the choice of the user.\\\hline
	\end{tabular}
	\label{Tab:U4}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=0.5\textwidth]{fig/U5}
	\centering
	\caption{Use case diagram of U5. Bookmark story}
	\label{Fig:U5}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U5. Bookmark story}
	\begin{tabular}[b]{| p{3.5cm} | p{13cm}|}\hline
		\textbf{ID} 				& U5									\\\hline
		\textbf{Name} 				& Bookmark story.					\\\hline
		\textbf{Brief description}	& Bookmark story as to-read or use user-defined bookmarks. 		\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& Medium								\\\hline
		\textbf{Preconditions}		& User is registered and signed in		\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User opens a story to read
				\item User clicks the bookmark button in the story and selects the desired bookmark to add to the story.
				\item Story will be bookmarked with the chosen bookmark.
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item The desired bookmark does not exist. The user clicks to add new bookmark.
			\end{enumerate}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& Bookmarks will be added to and/or removed from the story according to user's actions\\\hline
	\end{tabular}
	\label{Tab:U5}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=\textwidth]{fig/U6}
	\centering
	\caption{Use case diagram of U6. View story}
	\label{Fig:U6}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U6. View story}
	\begin{tabular}[b]{|p{3.5cm} | p{13cm}|}\hline
		\textbf{ID} 				& U6									\\\hline
		\textbf{Name} 				& View story.							\\\hline
		\textbf{Brief description}	& Display the selected story. 		\\\hline
		\textbf{Actors} 			& User, Digitalt fortalt				\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& The story has been recommended to the user at some point and is either in the current recommendations list or is bookmarked by the user.			\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User selects story
				\item Display:
					\begin{enumerate}
						\item The story
						\item Available media formats
						\item Link to story on Digitalt fortalt
					\end{enumerate}
				\item User may select a media format
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& The story is shown according to the user preferences\\\hline
	\end{tabular}
	\label{Tab:U6}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=\textwidth]{fig/U7}
	\centering
	\caption{Use case diagram of U7. Rate story}
	\label{Fig:U7}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U7. Rate story}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U7									\\\hline
		\textbf{Name} 				& Give feedback / rating.				\\\hline
		\textbf{Brief description}	& Give a rating on a story. 			\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& User has opened a story for reading	\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item After reading the story,  the user clicks on a rating to give feedback on the story
				\item The system saves the rating
				\item Story will be bookmarked with "Lest"
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User does not give a rating on the story before closing it
				\item The system reminds the user to rate the story at a later time
			\end{enumerate}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& The rating of the story from the user is saved\\\hline
	\end{tabular}
	\label{Tab:U7}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=\textwidth]{fig/U8}
	\centering
	\caption{Use case diagram of U8. View bookmarked stories}
	\label{Fig:U8}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U8. View bookmarked stories}
	\begin{tabular}[b]{| p{3.5cm} | p{13cm}|}\hline
		\textbf{ID} 				& U8									\\\hline
		\textbf{Name} 				& View bookmarked stories.				\\\hline
		\textbf{Brief description}	& View stories connected to a bookmark (read,to-read,bookmarks defined by user). 			\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& Medium								\\\hline
		\textbf{Preconditions}		& User is registered and signed in		\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item User selects bookmark from menu
				\item List of stories shown
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item No stories found
				\item Display message “No stories found”
			\end{enumerate}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& User is shown all of the stories collected\\\hline
	\end{tabular}
	\label{Tab:U8}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=0.5\textwidth]{fig/U9}
	\centering
	\caption{Use case diagram of U9. Specify settings}
	\label{Fig:U9}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U9. Specify settings}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U9									\\\hline
		\textbf{Name} 				& Specify settings.						\\\hline
		\textbf{Brief description}	& Specify and change system settings. 	\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& User is signed in						\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item While logged in, user clicks on settings
				\item User edits the data in settings
					\begin{enumerate}
						\item Category preferences
						\item Age group / sex
						\item User e-mail
					\end{enumerate}
				\item The system saves the new settings
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& Settings are changed and saved\\\hline
	\end{tabular}
	\label{Tab:U9}
\end{table}

\begin{figure}[hp]
	\includegraphics[width=0.5\textwidth]{fig/U10}
	\centering
	\caption{Use case diagram of U10. Read about app}
	\label{Fig:U10}
\end{figure}

\begin{table}[hp]
	\renewcommand{\arraystretch}{1.5}
	\centering
	\caption{Textual description of U10. Read about app}
	\begin{tabular}[b]{|l | l|}\hline
		\textbf{ID} 				& U10									\\\hline
		\textbf{Name} 				& Read about app.						\\\hline
		\textbf{Brief description}	& Basic info about the application. 	\\\hline
		\textbf{Actors} 			& User									\\\hline
		\textbf{Priority}			& High									\\\hline
		\textbf{Preconditions}		& User is signed in						\\\hline&\\[-2ex]
		\textbf{Basic flow}			& \begin{minipage}{5in}
			\begin{enumerate}[noitemsep]
				\item While signed in, user clicks on settings
				\item User clicks on read about app and is presented with information about the app
			\end{enumerate}						
		\end{minipage}						\\\hline&\\[-2ex]
		\textbf{Alternate flow}		& \begin{minipage}{5in}
		\end{minipage}							\\\hline
		\textbf{Postconditions}		& \\\hline
	\end{tabular}
	\label{Tab:U10}
\end{table}

\pagebreak
\section{Non-functional requirements}
\label{sec:non-functional_requirements}

A general requirement for the project was to use English in all parts related to the documentation of the application, while the language in the application would be Norwegian. Other general requirements concerned the platforms the application should run on. It was decided that it should run on both Android and iOS, and that the design of the application should approach a native feel as much as possible on these platforms.\newline

A quality attribute (QA) is a measurable or testable property of a system that is used to indicate how well the system satisfies the needs of the stakeholders. You can think of a quality attribute as measuring the product along some dimension of interest to a stakeholder \cite[p.63]{Bass:2012:SAP:2392670}. To make better decisions at a top-level design perspective, and to make better decisions on a component and implementation level, the team wanted the customer to rank each of the quality attributes. The list of QAs and the ranking can be seen in \textbf{Table \ref{Tab:quality_attributes}}. \newline

\begin{table}[h]
	\small
	\centering
	\caption[Quality attributes]{The quality attributes used in this project. Prioritized by the customer} 
	\begin{tabular}{ | p{2.9cm} | p{11.5cm} | p{1.4cm} | }	
		\hline {\bf Quality \newline attribute} & {\bf Description} & {\bf Priority} \\ \hline
		
		Usability & How easy is it for the user to accomplish a desired task and what kind of user support should the system focus on. (eg. tutorials or hints) & 1 \\\hline
		
		Monitorability & How important is the ability to monitor how the system while its executing. (eg. statistics ect.) & 2 \\\hline		
		
		Modifiability & How important and how easy should the product be able to be changed after it`s finalized? (eg. making changes to the UI) & 3\\\hline
		
		Performance & How important is time and speed of the system? (eg. response time for fetching stories) & 4\\\hline
		
		Interoperability & How important is the ability for the system to work together with other systems. (eg. making use of specific communication protocols or the use of a specified data format) & 5	\\\hline
		
		Availability & How important is the reliability of the product.The easy representation to think of this is uptime of the service. & 6 \\\hline
		
		Security & How important is the systems ability to protect data and information from unauthorized access. (eg. losing personalized data) & 7 \\\hline
		
		Testability & How important is the ability to set up tests for the system (eg. setting up automated test for components and parts of the system) & 8 \\\hline	
	\end{tabular}
	\label{Tab:quality_attributes}
\end{table}

The described quality attributes are the most generic or descriptive for this project \todo{Hva er ment med dette? Omformulere?}. The reader should also keep in mind that there are crossover attributes, e.g.. Maintainability/Testability may increase availability, that could be included in a project of greater scope.\newline

The ranked list was helpful in choosing the solutions, architecture and patterns that were most in accordance with the customer's vision and needs. In a project with more resources or a more narrow scope there would have been more plans for measuring and quality assure each of the attributes, but this would broaden the scope and workload of a project which was already on a tight schedule. Instead this was used as a guideline assisting the development and decision making throughout the project. This was not a decision that was easily compromised but was believed to be one area we could free up some time. With that said, extensive testing and measuring was done to achieve a high quality product (see \textbf{Chapter \ref{chap:testing}}).\newline






